---
name: K3s 1.17
version: 1.17.17-5.12.0.2-20210412
publisher: OpenNebula Systems
description: |-
  Image with preinstalled K3s binary.

  **IMPORTANT**: Firecracker VM requires [Kernel 4.19](/appliance/ba40d522-8739-11eb-8dcd-0242ac130003). Don't forget to import it as well and update K3s VM template to point to this kernel (see `KERNEL_DS = "$FILE[IMAGE_ID=<USER_ADD>]"`).
short_description: Image with preinstalled K3s 1.17
tags:
- k3s
- ubuntu
format: raw
creation_time: 1618241338
os-id: Ubuntu
os-release: '18.04'
os-arch: x86_64
hypervisor: FIRECRACKER
opennebula_version: 5.13, 6.0, 6.1
logo: k3s.png
opennebula_template:
  context:
    k3s_dns_enable: "$K3S_DNS_ENABLE"
    k3s_flannel_backend: "$K3S_FLANNEL_BACKEND"
    k3s_ingress_enable: "$K3S_INGRESS_ENABLE"
    k3s_lb_enable: "$K3S_LB_ENABLE"
    k3s_role: "$K3S_ROLE"
    k3s_version: "$K3S_VERSION"
    network: "YES"
    set_hostname: "k3s-$K3S_ROLE-$VMID"
    ssh_public_key: "$USER[SSH_PUBLIC_KEY]"
    start_script_base64: 'c3RhcnRfc2VydmVyICgpIHsKICAjIHNldCBLM3Mgc2VydmVyIG9wdGlvbnMKICBbWyAke0VYVEVSTkFMX0lQfSAhPSAibnVsbCIgXV0gJiYgSzNTX0VYVEVSTkFMX0lQPSItLW5vZGUtZXh0ZXJuYWwtaXAgJHtFWFRFUk5BTF9JUH0iCiAgIFtbICR7RVhURVJOQUxfSVB9ICE9ICJudWxsIiBdXSAmJiBLM1NfVExTX1NBTj0iLS10bHMtc2FuICR7RVhURVJOQUxfSVB9IgogIEszU19LVUJFQ09ORklHX01PREU9Ii0td3JpdGUta3ViZWNvbmZpZy1tb2RlIDYwMCIKICBLM1NfQ05JPSItLWZsYW5uZWwtYmFja2VuZD0ke0szU19GTEFOTkVMX0JBQ0tFTkR9IgogIEszU19MT0c9Ii0tbG9nIC90bXAvazNzLmxvZyIKICBLM1NfU1RPUkFHRT0iLS1kZWZhdWx0LWxvY2FsLXN0b3JhZ2UtcGF0aCAvdG1wL2szcy1zdG9yYWdlIgogIFtbICR7SzNTX0lOR1JFU1NfRU5BQkxFfSA9PSAiTk8iIF1dICYmIEszU19UUkFFRklLPSItLW5vLWRlcGxveSB0cmFlZmlrIgogIFtbICR7SzNTX0ROU19FTkFCTEV9ID09ICJOTyIgXV0gJiYgSzNTX0NPUkVETlM9Ii0tZGlzYWJsZSBjb3JlZG5zIgogIFtbICR7SzNTX0xCX0VOQUJMRX0gPT0gIk5PIiBdXSAmJiBLM1NfTEI9Ii0tZGlzYWJsZSBzZXJ2aWNlbGIiCgogIEszU19PUFRTPSIke0szU19FWFRFUk5BTF9JUH0gJHtLM1NfVExTX1NBTn0gJHtLM1NfS1VCRUNPTkZJR19NT0RFfSAke0szU19DTkl9ICR7SzNTX0xPR30gJHtLM1NfU1RPUkFHRX0gJHtLM1NfVFJBRUZJS30gJHtLM1NfQ09SRUROU30gJHtLM1NfTEJ9IgoKICAjIHJ1biBLM3Mgc2VydmVyCiAgbm9odXAgazNzIHNlcnZlciAke0szU19PUFRTfSA+IC9kZXYvbnVsbCAmCgogICMgY2hlY2sgdG9rZW4gZmlsZQogIHdoaWxlIFtbICEgLWYgL3Zhci9saWIvcmFuY2hlci9rM3Mvc2VydmVyL3Rva2VuIF1dOyBkbyBzbGVlcCAyOyBkb25lCgogICMgdXBkYXRlIFZNIG1ldGFkYXRhIHdpdGggdG9rZW4KICBvbmVnYXRlIHZtIHVwZGF0ZSAtLWRhdGEgSzNTX1RPS0VOPSQoY2F0IC92YXIvbGliL3JhbmNoZXIvazNzL3NlcnZlci90b2tlbikKfQoKc3RhcnRfYWdlbnQgKCkgewogIEszU19TRVJWRVJfSUQ9JChvbmVnYXRlIHNlcnZpY2Ugc2hvdyAtLWpzb24gfCBqcSAnLlNFUlZJQ0Uucm9sZXNbXSB8IHNlbGVjdCgubmFtZT09ICJzZXJ2ZXIiKSB8IC5ub2Rlc1swXS52bV9pbmZvLlZNLklEJyB8IHNlZCAtZSAncy9eIi8vJyAtZSAncy8iJC8vJykKICBLM1NfU0VSVkVSX0lQPSQob25lZ2F0ZSB2bSBzaG93ICR7SzNTX1NFUlZFUl9JRH0gLS1qc29uIHwganEgLlZNLlRFTVBMQVRFLk5JQ1swXS5FWFRFUk5BTF9JUCB8IHNlZCAtZSAncy9eIi8vJyAtZSAncy8iJC8vJykKICBbWyAke0szU19TRVJWRVJfSVB9ID09ICJudWxsIiBdXSAmJiBLM1NfU0VSVkVSX0lQPSQob25lZ2F0ZSB2bSBzaG93ICR7SzNTX1NFUlZFUl9JRH0gLS1qc29uIHwganEgLlZNLlRFTVBMQVRFLk5JQ1swXS5JUCB8IHNlZCAtZSAncy9eIi8vJyAtZSAncy8iJC8vJykKICBLM1NfVE9LRU49JChvbmVnYXRlIHZtIHNob3cgJHtLM1NfU0VSVkVSX0lEfSAtLWpzb24gfCBqcSAuVk0uVVNFUl9URU1QTEFURS5LM1NfVE9LRU4gfCBzZWQgLWUgJ3MvXiIvLycgLWUgJ3MvIiQvLycpCiAgSzNTX1VSTD0iaHR0cHM6Ly8ke0szU19TRVJWRVJfSVB9OjY0NDMiCgogIFtbICR7RVhURVJOQUxfSVB9ICE9ICJudWxsIiBdXSAmJiBLM1NfRVhURVJOQUxfSVA9Ii0tbm9kZS1leHRlcm5hbC1pcCAke0VYVEVSTkFMX0lQfSIKCiMgc2V0IEszcyBhZ2VudCBvcHRpb25zCiAgSzNTX09QVFM9IiR7SzNTX0VYVEVSTkFMX0lQfSAtLXRva2VuICR7SzNTX1RPS0VOfSAtLXNlcnZlciAke0szU19VUkx9IC0tbG9nIC90bXAvazNzX2FnZW50LmxvZyIKCiMgcnVuIEszcyBhZ2VudAogIG5vaHVwIGszcyBhZ2VudCAke0szU19PUFRTfSA+IC9kZXYvbnVsbCAmCn0KCiMgbW91bnQgY29udGV4dAptb3VudCAtTCBDT05URVhUIC9tbnQKCiMgZXhwb3J0IEszUyB2YXJpYWJsZXMKZXhwb3J0ICQoZ3JlcCBLM1MgL21udC9jb250ZXh0LnNoIHwgc2VkIC1lICJzLycvL2ciKQoKIyBkb3dubG9hZCBLM3MKd2dldCAtLW5vLWNoZWNrLWNlcnRpZmljYXRlIC1PIC91c3IvbG9jYWwvYmluL2szcyBodHRwczovL2dpdGh1Yi5jb20vazNzLWlvL2szcy9yZWxlYXNlcy9kb3dubG9hZC8ke0szU19WRVJTSU9OfS9rM3MgJiYgY2htb2QgNzU1IC91c3IvbG9jYWwvYmluL2szcwoKIyBzZXQgSE9TVCBJUCBhbmQgL2V0Yy9ob3N0cwpIT1NUX0lQPSQob25lZ2F0ZSB2bSBzaG93IC0tanNvbiB8IGpxIC5WTS5URU1QTEFURS5OSUNbMF0uSVAgfCBzZWQgLWUgJ3MvXiIvLycgLWUgJ3MvIiQvLycpCkVYVEVSTkFMX0lQPSQob25lZ2F0ZSB2bSBzaG93IC0tanNvbiB8IGpxIC5WTS5URU1QTEFURS5OSUNbMF0uRVhURVJOQUxfSVAgfCBzZWQgLWUgJ3MvXiIvLycgLWUgJ3MvIiQvLycpCgppcCBhZGRyIGFkZCAke0VYVEVSTkFMX0lQfSBkZXYgbG8KCkhPU1ROQU1FPSQoaG9zdG5hbWUpCgpjYXQgPiAvZXRjL2hvc3RzIDw8IEVPRgoxMjcuMC4wLjEgbG9jYWxob3N0CiR7SE9TVF9JUH0gJHtIT1NUTkFNRX0KRU9GCgojIHN0YXJ0IGszcwppZiBbICR7SzNTX1JPTEV9ID09ICJhZ2VudCIgXTsgdGhlbgogICAgc3RhcnRfYWdlbnQKZWxzZQogICAgc3RhcnRfc2VydmVyCmZpCgojIHNldCBWTSBSZWFkeQpvbmVnYXRlIHZtIHVwZGF0ZSAtLWRhdGEgUkVBRFk9WUVTCgp1bW91bnQgL21udA=='
    token: "YES"
  cpu: "1"
  graphics:
    listen: "0.0.0.0"
    type: "VNC"
  memory: "2048"
  nic:
    network_mode: "auto"
  os:
    boot: ""
    kernel_cmd: "console=ttyS0 reboot=k panic=1 pci=off i8042.noaux i8042.nomux i8042.nopnp i8042.dumbkbd"
    kernel_ds: "$FILE[IMAGE_ID=<USER_ADD>]"
  sched_requirements: "CLUSTER=$EDGE_LOCATION"
  inputs_order: "EDGE_LOCATION,K3S_VERSION,K3S_DNS_ENABLE,K3S_INGRESS_ENABLE,K3S_LB_ENABLE,K3S_FLANNEL_BACKEND"
  vcpu: "2"
images:
- name: k3s
  url: https://d24fmfybwxpuhu.cloudfront.net/k3s-1.17.17-5.12.0.2.raw.gz
  type: OS
  dev_prefix: vd
  driver: raw
  size: 2147483648
  checksum:
    md5: 0387488c90f49bf79edbc95f2135ac15
    sha256: 78904e39966530aa05207a33c066881c3c3490f806798bacb6cb11f62dea569d
